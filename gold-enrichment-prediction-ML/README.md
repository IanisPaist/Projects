# Моделирование Процесса Восстановления Золота из Золотосодержащей Руды (LinReg, Decision Tree, RandomForest)


## Описание краткое
В данном проекте была решена следующая бизнес-задача: на основании данных о технологическом процессе обогащения золотосодержащей руды построить модель, которая будет предсказывать колчество золота в двух финальных сплавах. Были построены модели линейной регрессии, случайного леса, дерева решений. Качество моделей оценивалось на основании кастомной метрики sMAPE. Лучший результат показала модель случайного леса. Цель проекта была достигнута. 

## Описание производственного процесса

* Когда добытая руда проходит первичную обработку, получается дроблёная смесь. Её отправляют на флотацию (обогащение) и двухэтапную очистку
* Во флотационную установку подаётся смесь золотосодержащей руды. После обогащения получается черновой концентрат и «отвальные хвосты», то есть остатки продукта с низкой концентрацией ценных металлов. На стабильность этого процесса влияет непостоянное и неоптимальное физико-химическое состояние флотационной пульпы (смеси твёрдых частиц и жидкости).
* Черновой концентрат проходит две очистки. На выходе получается финальный концентрат и новые отвальные хвосты.

**Итого**: руда >> дробление >> дроблёная смесь >> флотация (обогащение) >> черновой концентрат (+ отвальные хвосты (отходы) > >> 2 стадии очистки >> финальный концентрат (+отходы)

## Описание данных

*Технологический процесс* 
* `Rougher feed` — исходное сырье
* `Rougher additions (или reagent additions)` — флотационные реагенты: Xanthate, Sulphate, Depressant
    * `Xanthate` — ксантогенат (промотер, или активатор флотации);
    * `Sulphate` — сульфат (на данном производстве сульфид натрия);
    * `Depressant` — депрессант (силикат натрия).
* `Rougher process` (англ. «грубый процесс») — флотация
* `Rougher tails` — отвальные хвосты
* `Float banks` — флотационная установка
* `Cleaner process` — очистка
* `Rougher Au` — черновой концентрат золота
* `Final Au` — финальный концентрат золота

*Параметры этапов*
* `air_amount` — объём воздуха
* `fluid_levels` — уровень жидкости
* `feed_size` — размер гранул сырья
* `feed_rate` — скорость подачи

> Название признаков представлено в формате `[этап].[тип_параметра].[название_параметра]`, пример `rougher.input.feed_ag`

*Возможные значения для блока `[этап]`*:
* `rougher` — флотация
* `primary_cleaner` — первичная очистка
* `secondary_cleaner` — вторичная очистка
* `final` — финальные характеристики


*Возможные значения для блока `[тип_параметра]`*:
* `input` — параметры сырья
* `output` — параметры продукта
* `state` — параметры, характеризующие текущее состояние этапа
* `calculation` — расчётные характеристики

**Формула обогащения руды**

Эффективность обогащения рассчитывается по формуле
$ Recovery = \frac{C * (F-T)}{ F * (C-T)} * 100\% $  
* C — доля золота в концентрате после флотации/очистки;
* F — доля золота в сырье/концентрате до флотации/очистки;
* T — доля золота в отвальных хвостах после флотации/очистки.

Важна доля золота в концентратах, хвостах и черновом концентрате.
___

**Метрики качества модели**

Нужно спрогнозировать сразу две величины:
* эффективность обогащения чернового концентрата `rougher.output.recovery`;
* эффективность обогащения финального концентрата `final.output.recovery`.

Итоговая метрика качества модели:
$ RESULT\_sMAPE = sMAPE(rougher) * 25\% + sMAPE(final) * 75\% $ 

## Используемые библиотеки

Pandas, numpy, sklearn